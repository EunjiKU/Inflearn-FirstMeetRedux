<!DOCTYPE html>
<html lang="en">
<head>
  <title>처음 만난 리덕스 - Counter</title>
  <script src="https://unpkg.com/redux@4.2.1/dist/redux.min.js"></script>
</head>
<body>
  <h3>오늘 할 일</h3>
  <ul id="todo-list"></ul>

  <div>
    <input id="input-text" type="text">
    <button id="add-button">할 일 추가</button>
  </div>

  <script>
    const todoReducer = (state, action) => {
      switch (action.type) {
        case "ADD_TODO":
          return state.concat(action.text);
        default:
          return state;
      }
    }

    const store = Redux.createStore(
      todoReducer,
      ["처음 만난 리덕스 공부하기"]
    );

    const todoListElem = document.getElementById("todo-list");
    const inputElem = document.getElementById("input-text");

    function render() {
      // 이전 TOD 목록 초기화
      todoListElem.innerHTML = "";

      // TODO 목록 렌더링
      store.getState().forEach((todo) => {
        const todoListItemElem = document.createElement("li");
        todoListItemElem.textContent = todo;
        todoListElem.appendChild(todoListItemElem);
      })
    }

    render();
    store.subscribe(render);

    document.getElementById("add-button").addEventListener("click", function() {
      // Action을 실제로 dispatch
      store.dispatch({
        type: "ADD_TODO",
        text: inputElem.value
      });

      // Input 초기화
      inputElem.value = "";
    })
    
  </script>
</body>
</html>